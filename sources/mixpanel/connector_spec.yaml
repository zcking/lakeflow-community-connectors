# Mixpanel Community Connector Spec
# This file defines the specification for the connector including
# connection parameters and allowlist options.

# ============================================================================
# Connection Parameters
# These are provided when creating the Unity Catalog connection.
#
# The Mixpanel connector supports two authentication methods:
# 1. Service Account (username + secret) - Recommended for organizations
# 2. API Secret - Simpler setup for individual projects
# ============================================================================
connection:
  # ---------------------------------------------------------------------------
  # Authentication Methods
  # Choose ONE of the following authentication approaches
  # ---------------------------------------------------------------------------
  auth_methods:
    - name: service_account
      description: >
        Authenticate using Mixpanel service account credentials. This is the
        recommended approach for organizations with multiple projects, as it
        provides better access control and audit trails.
      parameters:
        - name: username
          type: string
          required: true
          description: >
            Mixpanel service account username. Found in Organization Settings
            under Service Accounts.

        - name: secret
          type: string
          required: true
          description: >
            Mixpanel service account secret. Generated when creating the
            service account.

    - name: api_secret
      description: >
        Authenticate using a project API secret. This is simpler to set up
        but provides less granular access control.
      parameters:
        - name: api_secret
          type: string
          required: true
          description: >
            Mixpanel project API secret. Found in Project Settings under
            the API Secret section.

  # ---------------------------------------------------------------------------
  # Common Parameters (shared across all authentication methods)
  # ---------------------------------------------------------------------------
  common_parameters:
    - name: project_id
      type: string
      required: false
      description: >
        Mixpanel project ID. Optional for service account authentication.
        Should not be provided when using API secret authentication as it
        is derived from the secret.

    - name: region
      type: string
      required: false
      description: >
        Mixpanel data region. Valid values are 'US' or 'EU'. Defaults to 'US'.
        This determines the API endpoint used (data.mixpanel.com vs
        data-eu.mixpanel.com).

    - name: project_timezone
      type: string
      required: false
      description: >
        Project timezone for date calculations. Defaults to 'US/Pacific'.
        Examples: 'UTC', 'America/New_York', 'Europe/London'.

    - name: historical_days
      type: string
      required: false
      description: >
        Number of days of historical data to fetch in the initial snapshot.
        Defaults to 10. Only affects the first run; subsequent runs use
        incremental sync based on stored cursors.

# ============================================================================
# External Options Allowlist
# These table-specific options must be included in the externalOptionsAllowList
# parameter of the UC connection to allow them to be passed through.
# Use a comma-separated string of option names.
# If no table-specific options are needed, set to empty string or omit.
# ============================================================================
external_options_allowlist: ""
