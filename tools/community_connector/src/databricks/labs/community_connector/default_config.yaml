# Default configuration for Community Connector CLI
# These values are used unless overridden by CLI arguments or --config file

# Workspace path to clone the repo to and use as root path for the pipeline
workspace_path: "/Users/{CURRENT_USER}/.lakeflow_community_connectors/{PIPELINE_NAME}"

# Connection configuration
connection:
  # External options allowlist that is always appended to the source-specific allowlist.
  # These are common table configuration options that all connectors support.
  # The final externalOptionsAllowList = source_spec_allowlist + this_allowlist
  external_options_allowlist: "tableName,tableNameList,tableConfigs,isDeleteFlow" 

# Repository configuration
repo:
  # Default Git repository URL
  url: https://github.com/databrickslabs/lakeflow-community-connectors.git

  # Desired workspace path for the repo
  path: "{WORKSPACE_PATH}"

  # Git provider
  provider: gitHub

  # Branch to checkout (null uses default branch)
  branch: master 

  # Sparse checkout to only clone necessary directories
  # Pattern format: folder path without leading slash (Databricks Repos API requirement)
  # Note: Cone mode automatically includes all root-level files (README.md, LICENSE, etc.)
  sparse_checkout:
    patterns:
      - libs
      - pipeline
      - "sources/{SOURCE_NAME}"

  # Root files to exclude after checkout (cone mode always includes root files)
  # These files will be deleted from the workspace after repo creation
  exclude_root_files:
    - .gitignore
    - README.md
    - CONTRIBUTING.md
    - CLAUDE.md
    - NOTICE
    - pyproject.toml 

# Pipeline configuration
pipeline:
  # Workspace root path for the pipeline.
  root_path: "{WORKSPACE_PATH}"

  # Libraries or code needed by this pipeline deployment
  libraries:
    - glob:
        include: "{WORKSPACE_PATH}/ingest.py"

  # Release channel: CURRENT or PREVIEW
  channel: PREVIEW 

  # Whether pipeline runs continuously
  continuous: false

  # Development mode (true for dev, false for production)
  development: true

  # Whether to use serverless mode
  serverless: true

  # Default target catalog to use for the pipeline
  catalog: main

  # Default target schema to use for the pipeline
  schema: default
